EESchema Schematic File Version 4
LIBS:bluepill_geyser-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 2
Title "Bluepill Geyser Current"
Date "2019-09-04"
Rev "324234"
Comp "Janus"
Comment1 ""
Comment2 "tw"
Comment3 "3"
Comment4 "4"
$EndDescr
$Sheet
S 2750 2550 1600 1850
U 5C14BAF9
F0 "Bluepill Node" 50
F1 "node.sch" 50
F2 "ADC_CH0" I R 4350 3600 50 
F3 "UART1_RX" I R 4350 2650 50 
F4 "UART1_TX" O R 4350 2750 50 
F5 "I2C1_SCL" B L 2750 3850 50 
F6 "I2C1_SDA" B L 2750 4000 50 
F7 "ADC_CH1" I R 4350 3500 50 
F8 "UART2_RX" I R 4350 4150 50 
F9 "UART2_TX" O R 4350 4250 50 
$EndSheet
Text Label 4900 3500 2    50   ~ 0
EXT_TEMP
Text Label 4900 3600 2    50   ~ 0
CURRENT
$Comp
L Device:C C1
U 1 1 5C15F5D6
P 5050 7050
F 0 "C1" H 5200 7000 50  0000 L CNN
F 1 "100nF" H 5200 7100 50  0000 L CNN
F 2 "RA1_2" H 5088 6900 50  0001 C CNN
F 3 "~" H 5050 7050 50  0001 C CNN
	1    5050 7050
	-1   0    0    1   
$EndComp
$Comp
L Device:C C2
U 1 1 5C15F64E
P 6500 3050
F 0 "C2" H 6615 3096 50  0000 L CNN
F 1 "100nF" H 6615 3005 50  0000 L CNN
F 2 "RA1_2" H 6538 2900 50  0001 C CNN
F 3 "~" H 6500 3050 50  0001 C CNN
	1    6500 3050
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR0119
U 1 1 5C160478
P 8800 5400
F 0 "#PWR0119" H 8800 5150 50  0001 C CNN
F 1 "GNDREF" H 8805 5227 50  0001 C CNN
F 2 "" H 8800 5400 50  0001 C CNN
F 3 "" H 8800 5400 50  0001 C CNN
	1    8800 5400
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR0120
U 1 1 5C1604A9
P 6500 3250
F 0 "#PWR0120" H 6500 3000 50  0001 C CNN
F 1 "GNDREF" H 6505 3077 50  0001 C CNN
F 2 "" H 6500 3250 50  0001 C CNN
F 3 "" H 6500 3250 50  0001 C CNN
	1    6500 3250
	1    0    0    -1  
$EndComp
Wire Wire Line
	6500 3250 6500 3200
Wire Wire Line
	6500 2850 6500 2900
$Comp
L Connector_Generic:Conn_01x04 J4
U 1 1 5C177171
P 5350 2550
F 0 "J4" H 5430 2542 50  0000 L CNN
F 1 "Conn_01x04" H 5430 2451 50  0000 L CNN
F 2 "SIP4" H 5350 2550 50  0001 C CNN
F 3 "~" H 5350 2550 50  0001 C CNN
	1    5350 2550
	1    0    0    -1  
$EndComp
Wire Wire Line
	5150 2750 4350 2750
$Comp
L power:GNDREF #PWR01
U 1 1 5C17ABCC
P 4850 2550
F 0 "#PWR01" H 4850 2300 50  0001 C CNN
F 1 "GNDREF" H 4855 2377 50  0001 C CNN
F 2 "" H 4850 2550 50  0001 C CNN
F 3 "" H 4850 2550 50  0001 C CNN
	1    4850 2550
	0    1    1    0   
$EndComp
$Comp
L power:+3V3 #PWR02
U 1 1 5C182515
P 5000 2250
F 0 "#PWR02" H 5000 2100 50  0001 C CNN
F 1 "+3V3" H 5015 2423 50  0000 C CNN
F 2 "" H 5000 2250 50  0001 C CNN
F 3 "" H 5000 2250 50  0001 C CNN
	1    5000 2250
	1    0    0    -1  
$EndComp
Wire Wire Line
	5000 2250 5000 2450
Wire Wire Line
	5000 2450 5150 2450
Wire Wire Line
	5150 2550 4850 2550
$Comp
L Connector_Generic:Conn_01x04 J5
U 1 1 5C1867AB
P 5300 4050
F 0 "J5" H 5380 4042 50  0000 L CNN
F 1 "Conn_01x04" H 5380 3951 50  0001 L CNN
F 2 "SIP4" H 5300 4050 50  0001 C CNN
F 3 "~" H 5300 4050 50  0001 C CNN
	1    5300 4050
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR03
U 1 1 5C18A966
P 4850 4050
F 0 "#PWR03" H 4850 3800 50  0001 C CNN
F 1 "GNDREF" H 4855 3877 50  0001 C CNN
F 2 "" H 4850 4050 50  0001 C CNN
F 3 "" H 4850 4050 50  0001 C CNN
	1    4850 4050
	0    1    1    0   
$EndComp
$Comp
L power:+3V3 #PWR04
U 1 1 5C18A9FA
P 5000 3850
F 0 "#PWR04" H 5000 3700 50  0001 C CNN
F 1 "+3V3" H 5015 4023 50  0000 C CNN
F 2 "" H 5000 3850 50  0001 C CNN
F 3 "" H 5000 3850 50  0001 C CNN
	1    5000 3850
	1    0    0    -1  
$EndComp
Wire Wire Line
	5000 3850 5000 3950
Wire Wire Line
	5000 3950 5100 3950
Wire Wire Line
	5100 4050 4850 4050
Wire Wire Line
	4350 4150 5100 4150
Wire Wire Line
	4350 4250 5100 4250
$Comp
L Device:C C3
U 1 1 5C15D8AF
P 5900 7100
F 0 "C3" H 6015 7146 50  0000 L CNN
F 1 "100uF" H 6015 7055 50  0000 L CNN
F 2 "RA1_3" H 5938 6950 50  0001 C CNN
F 3 "~" H 5900 7100 50  0001 C CNN
	1    5900 7100
	1    0    0    -1  
$EndComp
$Comp
L Device:C C5
U 1 1 5C15D9F4
P 6350 7100
F 0 "C5" H 6465 7146 50  0000 L CNN
F 1 "100nF" H 6465 7055 50  0000 L CNN
F 2 "RA1_2" H 6388 6950 50  0001 C CNN
F 3 "~" H 6350 7100 50  0001 C CNN
	1    6350 7100
	1    0    0    -1  
$EndComp
Wire Wire Line
	6350 6950 6100 6950
$Comp
L power:GNDREF #PWR05
U 1 1 5C16250C
P 5900 7450
F 0 "#PWR05" H 5900 7200 50  0001 C CNN
F 1 "GNDREF" H 5905 7277 50  0001 C CNN
F 2 "" H 5900 7450 50  0001 C CNN
F 3 "" H 5900 7450 50  0001 C CNN
	1    5900 7450
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR06
U 1 1 5C16254B
P 6350 7450
F 0 "#PWR06" H 6350 7200 50  0001 C CNN
F 1 "GNDREF" H 6355 7277 50  0001 C CNN
F 2 "" H 6350 7450 50  0001 C CNN
F 3 "" H 6350 7450 50  0001 C CNN
	1    6350 7450
	1    0    0    -1  
$EndComp
Wire Wire Line
	6350 7250 6350 7450
Wire Wire Line
	5900 7250 5900 7450
$Comp
L Device:C C?
U 1 1 5C18B18D
P 6000 3050
F 0 "C?" H 6115 3096 50  0000 L CNN
F 1 "10uF" H 6115 3005 50  0000 L CNN
F 2 "RA1_2" H 6038 2900 50  0001 C CNN
F 3 "~" H 6000 3050 50  0001 C CNN
	1    6000 3050
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR?
U 1 1 5C18DACC
P 6000 3250
F 0 "#PWR?" H 6000 3000 50  0001 C CNN
F 1 "GNDREF" H 6005 3077 50  0001 C CNN
F 2 "" H 6000 3250 50  0001 C CNN
F 3 "" H 6000 3250 50  0001 C CNN
	1    6000 3250
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR?
U 1 1 5C18DB5E
P 6750 4050
F 0 "#PWR?" H 6750 3800 50  0001 C CNN
F 1 "GNDREF" H 6755 3877 50  0001 C CNN
F 2 "" H 6750 4050 50  0001 C CNN
F 3 "" H 6750 4050 50  0001 C CNN
	1    6750 4050
	1    0    0    -1  
$EndComp
Wire Wire Line
	6000 3200 6000 3250
Wire Wire Line
	6000 2900 6000 2850
Wire Wire Line
	5150 2650 4350 2650
Text Notes 4800 4400 0    50   ~ 0
Sonoff UART
Wire Wire Line
	4350 3500 5700 3500
$Comp
L Device:R R?
U 1 1 5D704E95
P 8800 5100
F 0 "R?" H 8870 5146 50  0000 L CNN
F 1 "10K" H 8870 5055 50  0000 L CNN
F 2 "" V 8730 5100 50  0001 C CNN
F 3 "~" H 8800 5100 50  0001 C CNN
	1    8800 5100
	1    0    0    -1  
$EndComp
Wire Wire Line
	9750 4300 9750 4200
Wire Wire Line
	9750 3900 9750 3700
Wire Wire Line
	9750 3700 10550 3700
Text Label 10000 3700 0    50   ~ 0
POS_CURRENT_TRANSFORMER
Wire Wire Line
	8800 5250 8800 5400
$Comp
L power:+3V3 #PWR?
U 1 1 5D7084FB
P 5150 6600
F 0 "#PWR?" H 5150 6450 50  0001 C CNN
F 1 "+3V3" H 5165 6773 50  0000 C CNN
F 2 "" H 5150 6600 50  0001 C CNN
F 3 "" H 5150 6600 50  0001 C CNN
	1    5150 6600
	1    0    0    -1  
$EndComp
$Comp
L power:+3V3 #PWR?
U 1 1 5D708524
P 7350 4450
F 0 "#PWR?" H 7350 4300 50  0001 C CNN
F 1 "+3V3" H 7365 4623 50  0000 C CNN
F 2 "" H 7350 4450 50  0001 C CNN
F 3 "" H 7350 4450 50  0001 C CNN
	1    7350 4450
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5D709710
P 9750 4050
F 0 "R?" H 9820 4096 50  0000 L CNN
F 1 "470K" H 9820 4005 50  0000 L CNN
F 2 "" V 9680 4050 50  0001 C CNN
F 3 "~" H 9750 4050 50  0001 C CNN
	1    9750 4050
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 5D70E05B
P 6750 3800
F 0 "C?" H 6865 3846 50  0000 L CNN
F 1 "100nF" H 6865 3755 50  0000 L CNN
F 2 "RA1_2" H 6788 3650 50  0001 C CNN
F 3 "~" H 6750 3800 50  0001 C CNN
	1    6750 3800
	1    0    0    -1  
$EndComp
Wire Wire Line
	6750 3950 6750 4050
Wire Wire Line
	6750 3600 6750 3650
$Comp
L Device:R R?
U 1 1 5D70FD34
P 7300 3600
F 0 "R?" V 7200 3550 50  0000 L CNN
F 1 "10K" V 7400 3550 50  0000 L CNN
F 2 "" V 7230 3600 50  0001 C CNN
F 3 "~" H 7300 3600 50  0001 C CNN
	1    7300 3600
	0    1    1    0   
$EndComp
$Comp
L power:GNDREF #PWR?
U 1 1 5D711E33
P 7350 5400
F 0 "#PWR?" H 7350 5150 50  0001 C CNN
F 1 "GNDREF" H 7355 5227 50  0001 C CNN
F 2 "" H 7350 5400 50  0001 C CNN
F 3 "" H 7350 5400 50  0001 C CNN
	1    7350 5400
	1    0    0    -1  
$EndComp
Wire Wire Line
	4350 3600 6750 3600
Connection ~ 6750 3600
$Comp
L Device:D_Temperature_Dependent_ALT D?
U 1 1 5D71B52B
P 7050 3050
F 0 "D?" V 7004 3129 50  0000 L CNN
F 1 "LM335" V 7095 3129 50  0000 L CNN
F 2 "" H 7050 3050 50  0001 C CNN
F 3 "~" H 7050 3050 50  0001 C CNN
	1    7050 3050
	0    1    1    0   
$EndComp
$Comp
L power:GNDREF #PWR?
U 1 1 5D71C201
P 7050 3250
F 0 "#PWR?" H 7050 3000 50  0001 C CNN
F 1 "GNDREF" H 7055 3077 50  0001 C CNN
F 2 "" H 7050 3250 50  0001 C CNN
F 3 "" H 7050 3250 50  0001 C CNN
	1    7050 3250
	1    0    0    -1  
$EndComp
Wire Wire Line
	7050 3200 7050 3250
Wire Wire Line
	5700 3500 5700 2850
Wire Wire Line
	5700 2850 6000 2850
Wire Wire Line
	6000 2850 6500 2850
Connection ~ 6000 2850
Wire Wire Line
	6500 2850 7050 2850
Wire Wire Line
	7050 2850 7050 2900
Connection ~ 6500 2850
$Comp
L Device:R R?
U 1 1 5D71F54B
P 7050 2600
F 0 "R?" H 7120 2646 50  0000 L CNN
F 1 "220R" H 7120 2555 50  0000 L CNN
F 2 "" V 6980 2600 50  0001 C CNN
F 3 "~" H 7050 2600 50  0001 C CNN
	1    7050 2600
	1    0    0    -1  
$EndComp
Wire Wire Line
	7050 2750 7050 2850
Connection ~ 7050 2850
$Comp
L power:+3V3 #PWR?
U 1 1 5D7204B7
P 7050 2350
F 0 "#PWR?" H 7050 2200 50  0001 C CNN
F 1 "+3V3" H 7065 2523 50  0000 C CNN
F 2 "" H 7050 2350 50  0001 C CNN
F 3 "" H 7050 2350 50  0001 C CNN
	1    7050 2350
	1    0    0    -1  
$EndComp
Wire Wire Line
	7050 2350 7050 2450
$Comp
L power:+3V3 #PWR?
U 1 1 5D723C51
P 6100 6600
F 0 "#PWR?" H 6100 6450 50  0001 C CNN
F 1 "+3V3" H 6115 6773 50  0000 C CNN
F 2 "" H 6100 6600 50  0001 C CNN
F 3 "" H 6100 6600 50  0001 C CNN
	1    6100 6600
	1    0    0    -1  
$EndComp
Wire Wire Line
	6100 6600 6100 6950
Connection ~ 6100 6950
Wire Wire Line
	6100 6950 5900 6950
Wire Wire Line
	6750 3600 7150 3600
$Comp
L Amplifier_Operational:LM324 U?
U 1 1 5D728356
P 8000 3600
F 0 "U?" H 8000 3233 50  0000 C CNN
F 1 "LM324" H 8000 3324 50  0000 C CNN
F 2 "" H 7950 3700 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/lm2902-n.pdf" H 8050 3800 50  0001 C CNN
	1    8000 3600
	-1   0    0    1   
$EndComp
Wire Wire Line
	8300 3500 8450 3500
Wire Wire Line
	8450 3500 8450 3050
Wire Wire Line
	8450 3050 7600 3050
Wire Wire Line
	7600 3050 7600 3600
Wire Wire Line
	7600 3600 7700 3600
Wire Wire Line
	7600 3600 7450 3600
Connection ~ 7600 3600
Wire Wire Line
	9750 4300 10600 4300
Text Label 10000 4300 0    50   ~ 0
NEG_CURRENT_TRANSFORMER
$Comp
L Amplifier_Operational:LM324 U?
U 2 1 5D72A674
P 8300 4800
F 0 "U?" H 8300 4433 50  0000 C CNN
F 1 "LM324" H 8300 4524 50  0000 C CNN
F 2 "" H 8250 4900 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/lm2902-n.pdf" H 8350 5000 50  0001 C CNN
	2    8300 4800
	1    0    0    1   
$EndComp
Wire Wire Line
	8600 4800 8800 4800
Wire Wire Line
	8800 4800 8800 4950
Wire Wire Line
	8000 4700 7850 4700
Wire Wire Line
	7850 4700 7850 4300
Wire Wire Line
	7850 4300 8800 4300
Wire Wire Line
	8800 4300 8800 4800
Connection ~ 8800 4800
$Comp
L Device:R R?
U 1 1 5D72CE7F
P 7350 4700
F 0 "R?" H 7420 4746 50  0000 L CNN
F 1 "22K" H 7420 4655 50  0000 L CNN
F 2 "" V 7280 4700 50  0001 C CNN
F 3 "~" H 7350 4700 50  0001 C CNN
	1    7350 4700
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5D72CECF
P 7350 5100
F 0 "R?" H 7420 5146 50  0000 L CNN
F 1 "10K" H 7420 5055 50  0000 L CNN
F 2 "" V 7280 5100 50  0001 C CNN
F 3 "~" H 7350 5100 50  0001 C CNN
	1    7350 5100
	1    0    0    -1  
$EndComp
Wire Wire Line
	7350 5250 7350 5400
Wire Wire Line
	7350 4850 7350 4900
Wire Wire Line
	8000 4900 7350 4900
Connection ~ 7350 4900
Wire Wire Line
	7350 4900 7350 4950
Wire Wire Line
	7350 4550 7350 4450
Wire Wire Line
	8800 4800 9750 4800
Connection ~ 9750 4300
Wire Wire Line
	9750 4800 9750 4300
Wire Wire Line
	8300 3700 9750 3700
Connection ~ 9750 3700
$Comp
L Amplifier_Operational:LM324 U?
U 4 1 5D736B60
P 4350 5800
F 0 "U?" H 4350 5433 50  0000 C CNN
F 1 "LM324" H 4350 5524 50  0000 C CNN
F 2 "" H 4300 5900 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/lm2902-n.pdf" H 4400 6000 50  0001 C CNN
	4    4350 5800
	1    0    0    1   
$EndComp
$Comp
L Amplifier_Operational:LM324 U?
U 4 1 5D736C6D
P 4350 6550
F 0 "U?" H 4350 6183 50  0000 C CNN
F 1 "LM324" H 4350 6274 50  0000 C CNN
F 2 "" H 4300 6650 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/lm2902-n.pdf" H 4400 6750 50  0001 C CNN
	4    4350 6550
	1    0    0    1   
$EndComp
Wire Wire Line
	5150 6600 5150 6700
Wire Wire Line
	5150 6700 5050 6700
Wire Wire Line
	5050 6700 5050 6900
Wire Wire Line
	5300 7350 5200 7350
Wire Wire Line
	5050 7350 5050 7200
$Comp
L power:GNDREF #PWR?
U 1 1 5D73A5DC
P 5200 7450
F 0 "#PWR?" H 5200 7200 50  0001 C CNN
F 1 "GNDREF" H 5205 7277 50  0001 C CNN
F 2 "" H 5200 7450 50  0001 C CNN
F 3 "" H 5200 7450 50  0001 C CNN
	1    5200 7450
	1    0    0    -1  
$EndComp
Wire Wire Line
	5200 7350 5200 7450
Connection ~ 5200 7350
Wire Wire Line
	5200 7350 5050 7350
$Comp
L Amplifier_Operational:LM324 U?
U 5 1 5D736D0C
P 5400 7050
F 0 "U?" H 5358 7096 50  0000 L CNN
F 1 "LM324" H 5358 7005 50  0000 L CNN
F 2 "" H 5350 7150 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/lm2902-n.pdf" H 5450 7250 50  0001 C CNN
	5    5400 7050
	1    0    0    -1  
$EndComp
Wire Wire Line
	5150 6700 5300 6700
Wire Wire Line
	5300 6700 5300 6750
Connection ~ 5150 6700
$Comp
L power:GNDREF #PWR?
U 1 1 5D744245
P 3750 6750
F 0 "#PWR?" H 3750 6500 50  0001 C CNN
F 1 "GNDREF" H 3755 6577 50  0001 C CNN
F 2 "" H 3750 6750 50  0001 C CNN
F 3 "" H 3750 6750 50  0001 C CNN
	1    3750 6750
	1    0    0    -1  
$EndComp
Wire Wire Line
	4050 5700 3900 5700
Wire Wire Line
	3900 5700 3900 5350
Wire Wire Line
	3900 5350 4700 5350
Wire Wire Line
	4700 5350 4700 5800
Wire Wire Line
	4700 5800 4650 5800
Wire Wire Line
	4050 6450 3900 6450
Wire Wire Line
	3900 6450 3900 6100
Wire Wire Line
	3900 6100 4700 6100
Wire Wire Line
	4700 6100 4700 6550
Wire Wire Line
	4700 6550 4650 6550
Wire Wire Line
	4050 6650 3750 6650
Wire Wire Line
	3750 6650 3750 6750
Wire Wire Line
	4050 5900 3750 5900
Wire Wire Line
	3750 5900 3750 6650
Connection ~ 3750 6650
$EndSCHEMATC
