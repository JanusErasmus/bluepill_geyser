EESchema Schematic File Version 4
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 2
Title "Bluepill Geyser Current"
Date "2019-09-04"
Rev "324234"
Comp "Janus"
Comment1 ""
Comment2 "tw"
Comment3 "3"
Comment4 "4"
$EndDescr
$Sheet
S 2750 2550 1600 1850
U 5C14BAF9
F0 "Bluepill Node" 50
F1 "node.sch" 50
F2 "ADC_CH0" I R 4350 3500 50 
F3 "UART1_RX" I R 4350 2650 50 
F4 "UART1_TX" O R 4350 2750 50 
F5 "I2C1_SCL" B L 2750 3850 50 
F6 "I2C1_SDA" B L 2750 4000 50 
F9 "ADC_CH1" I R 4350 3600 50 
F10 "UART2_RX" I R 4350 4150 50 
F11 "UART2_TX" O R 4350 4250 50 
$EndSheet
Text Label 4900 3500 2    50   ~ 0
EXT_TEMP
Text Label 4900 3600 2    50   ~ 0
CURRENT
$Comp
L Device:C C1
U 1 1 5C15F5D6
P 9450 3900
F 0 "C1" V 9600 3850 50  0000 L CNN
F 1 "100nF" V 9300 3800 50  0000 L CNN
F 2 "RA1_2" H 9488 3750 50  0001 C CNN
F 3 "~" H 9450 3900 50  0001 C CNN
	1    9450 3900
	0    -1   -1   0   
$EndComp
$Comp
L Device:C C2
U 1 1 5C15F64E
P 6500 3050
F 0 "C2" H 6615 3096 50  0000 L CNN
F 1 "100nF" H 6615 3005 50  0000 L CNN
F 2 "RA1_2" H 6538 2900 50  0001 C CNN
F 3 "~" H 6500 3050 50  0001 C CNN
	1    6500 3050
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR0119
U 1 1 5C160478
P 9750 4800
F 0 "#PWR0119" H 9750 4550 50  0001 C CNN
F 1 "GNDREF" H 9755 4627 50  0001 C CNN
F 2 "" H 9750 4800 50  0001 C CNN
F 3 "" H 9750 4800 50  0001 C CNN
	1    9750 4800
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR0120
U 1 1 5C1604A9
P 6500 3250
F 0 "#PWR0120" H 6500 3000 50  0001 C CNN
F 1 "GNDREF" H 6505 3077 50  0001 C CNN
F 2 "" H 6500 3250 50  0001 C CNN
F 3 "" H 6500 3250 50  0001 C CNN
	1    6500 3250
	1    0    0    -1  
$EndComp
Wire Wire Line
	6500 3250 6500 3200
Wire Wire Line
	6500 2850 6500 2900
$Comp
L Connector_Generic:Conn_01x04 J4
U 1 1 5C177171
P 5350 2550
F 0 "J4" H 5430 2542 50  0000 L CNN
F 1 "Conn_01x04" H 5430 2451 50  0000 L CNN
F 2 "SIP4" H 5350 2550 50  0001 C CNN
F 3 "~" H 5350 2550 50  0001 C CNN
	1    5350 2550
	1    0    0    -1  
$EndComp
Wire Wire Line
	5150 2750 4350 2750
$Comp
L power:GNDREF #PWR01
U 1 1 5C17ABCC
P 4850 2550
F 0 "#PWR01" H 4850 2300 50  0001 C CNN
F 1 "GNDREF" H 4855 2377 50  0001 C CNN
F 2 "" H 4850 2550 50  0001 C CNN
F 3 "" H 4850 2550 50  0001 C CNN
	1    4850 2550
	0    1    1    0   
$EndComp
$Comp
L power:+3V3 #PWR02
U 1 1 5C182515
P 5000 2250
F 0 "#PWR02" H 5000 2100 50  0001 C CNN
F 1 "+3V3" H 5015 2423 50  0000 C CNN
F 2 "" H 5000 2250 50  0001 C CNN
F 3 "" H 5000 2250 50  0001 C CNN
	1    5000 2250
	1    0    0    -1  
$EndComp
Wire Wire Line
	5000 2250 5000 2450
Wire Wire Line
	5000 2450 5150 2450
Wire Wire Line
	5150 2550 4850 2550
$Comp
L Connector_Generic:Conn_01x04 J5
U 1 1 5C1867AB
P 5300 4050
F 0 "J5" H 5380 4042 50  0000 L CNN
F 1 "Conn_01x04" H 5380 3951 50  0001 L CNN
F 2 "SIP4" H 5300 4050 50  0001 C CNN
F 3 "~" H 5300 4050 50  0001 C CNN
	1    5300 4050
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR03
U 1 1 5C18A966
P 4850 4050
F 0 "#PWR03" H 4850 3800 50  0001 C CNN
F 1 "GNDREF" H 4855 3877 50  0001 C CNN
F 2 "" H 4850 4050 50  0001 C CNN
F 3 "" H 4850 4050 50  0001 C CNN
	1    4850 4050
	0    1    1    0   
$EndComp
$Comp
L power:+3V3 #PWR04
U 1 1 5C18A9FA
P 5000 3850
F 0 "#PWR04" H 5000 3700 50  0001 C CNN
F 1 "+3V3" H 5015 4023 50  0000 C CNN
F 2 "" H 5000 3850 50  0001 C CNN
F 3 "" H 5000 3850 50  0001 C CNN
	1    5000 3850
	1    0    0    -1  
$EndComp
Wire Wire Line
	5000 3850 5000 3950
Wire Wire Line
	5000 3950 5100 3950
Wire Wire Line
	5100 4050 4850 4050
Wire Wire Line
	4350 4150 5100 4150
Wire Wire Line
	4350 4250 5100 4250
$Comp
L Device:C C3
U 1 1 5C15D8AF
P 5900 7100
F 0 "C3" H 6015 7146 50  0000 L CNN
F 1 "100uF" H 6015 7055 50  0000 L CNN
F 2 "RA1_3" H 5938 6950 50  0001 C CNN
F 3 "~" H 5900 7100 50  0001 C CNN
	1    5900 7100
	1    0    0    -1  
$EndComp
$Comp
L Device:C C5
U 1 1 5C15D9F4
P 6350 7100
F 0 "C5" H 6465 7146 50  0000 L CNN
F 1 "100nF" H 6465 7055 50  0000 L CNN
F 2 "RA1_2" H 6388 6950 50  0001 C CNN
F 3 "~" H 6350 7100 50  0001 C CNN
	1    6350 7100
	1    0    0    -1  
$EndComp
Wire Wire Line
	6350 6950 6100 6950
$Comp
L power:GNDREF #PWR05
U 1 1 5C16250C
P 5900 7300
F 0 "#PWR05" H 5900 7050 50  0001 C CNN
F 1 "GNDREF" H 5905 7127 50  0001 C CNN
F 2 "" H 5900 7300 50  0001 C CNN
F 3 "" H 5900 7300 50  0001 C CNN
	1    5900 7300
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR06
U 1 1 5C16254B
P 6350 7300
F 0 "#PWR06" H 6350 7050 50  0001 C CNN
F 1 "GNDREF" H 6355 7127 50  0001 C CNN
F 2 "" H 6350 7300 50  0001 C CNN
F 3 "" H 6350 7300 50  0001 C CNN
	1    6350 7300
	1    0    0    -1  
$EndComp
Wire Wire Line
	6350 7250 6350 7300
Wire Wire Line
	5900 7250 5900 7300
$Comp
L Device:C C?
U 1 1 5C18B18D
P 6000 3050
F 0 "C?" H 6115 3096 50  0000 L CNN
F 1 "10uF" H 6115 3005 50  0000 L CNN
F 2 "RA1_2" H 6038 2900 50  0001 C CNN
F 3 "~" H 6000 3050 50  0001 C CNN
	1    6000 3050
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR?
U 1 1 5C18DACC
P 6000 3250
F 0 "#PWR?" H 6000 3000 50  0001 C CNN
F 1 "GNDREF" H 6005 3077 50  0001 C CNN
F 2 "" H 6000 3250 50  0001 C CNN
F 3 "" H 6000 3250 50  0001 C CNN
	1    6000 3250
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR?
U 1 1 5C18DB5E
P 6750 4050
F 0 "#PWR?" H 6750 3800 50  0001 C CNN
F 1 "GNDREF" H 6755 3877 50  0001 C CNN
F 2 "" H 6750 4050 50  0001 C CNN
F 3 "" H 6750 4050 50  0001 C CNN
	1    6750 4050
	1    0    0    -1  
$EndComp
Wire Wire Line
	6000 3200 6000 3250
Wire Wire Line
	6000 2900 6000 2850
Wire Wire Line
	5150 2650 4350 2650
Text Notes 4800 4400 0    50   ~ 0
Sonoff UART
Wire Wire Line
	4350 3500 5700 3500
$Comp
L Device:R R?
U 1 1 5D704E95
P 9750 4350
F 0 "R?" H 9820 4396 50  0000 L CNN
F 1 "10K" H 9820 4305 50  0000 L CNN
F 2 "" V 9680 4350 50  0001 C CNN
F 3 "~" H 9750 4350 50  0001 C CNN
	1    9750 4350
	1    0    0    -1  
$EndComp
Wire Wire Line
	9750 4200 9750 3900
Wire Wire Line
	9600 3900 9750 3900
Connection ~ 9750 3900
Wire Wire Line
	9750 3900 9750 3800
Wire Wire Line
	9750 3500 9750 3300
Wire Wire Line
	9750 3300 10550 3300
Text Label 10000 3300 0    50   ~ 0
CURRENT_TRANSFORMER
Wire Wire Line
	9750 4500 9750 4800
$Comp
L Transistor_BJT:BC237 Q?
U 1 1 5D706B61
P 8450 3900
F 0 "Q?" H 8640 3946 50  0000 L CNN
F 1 "BC237" H 8640 3855 50  0000 L CNN
F 2 "Package_TO_SOT_THT:TO-92_Inline" H 8650 3825 50  0001 L CIN
F 3 "http://www.onsemi.com/pub_link/Collateral/BC237-D.PDF" H 8450 3900 50  0001 L CNN
	1    8450 3900
	-1   0    0    -1  
$EndComp
Wire Wire Line
	8750 4300 8750 4400
$Comp
L power:+3V3 #PWR?
U 1 1 5D7084FB
P 8350 2700
F 0 "#PWR?" H 8350 2550 50  0001 C CNN
F 1 "+3V3" H 8365 2873 50  0000 C CNN
F 2 "" H 8350 2700 50  0001 C CNN
F 3 "" H 8350 2700 50  0001 C CNN
	1    8350 2700
	1    0    0    -1  
$EndComp
$Comp
L power:+3V3 #PWR?
U 1 1 5D708524
P 8750 2700
F 0 "#PWR?" H 8750 2550 50  0001 C CNN
F 1 "+3V3" H 8765 2873 50  0000 C CNN
F 2 "" H 8750 2700 50  0001 C CNN
F 3 "" H 8750 2700 50  0001 C CNN
	1    8750 2700
	1    0    0    -1  
$EndComp
Wire Wire Line
	8350 2700 8350 3200
$Comp
L Device:R R?
U 1 1 5D709710
P 9750 3650
F 0 "R?" H 9820 3696 50  0000 L CNN
F 1 "10K" H 9820 3605 50  0000 L CNN
F 2 "" V 9680 3650 50  0001 C CNN
F 3 "~" H 9750 3650 50  0001 C CNN
	1    9750 3650
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5D70974C
P 8750 3350
F 0 "R?" H 8820 3396 50  0000 L CNN
F 1 "100K" H 8820 3305 50  0000 L CNN
F 2 "" V 8680 3350 50  0001 C CNN
F 3 "~" H 8750 3350 50  0001 C CNN
	1    8750 3350
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5D709798
P 8750 4550
F 0 "R?" H 8820 4596 50  0000 L CNN
F 1 "22K" H 8820 4505 50  0000 L CNN
F 2 "" V 8680 4550 50  0001 C CNN
F 3 "~" H 8750 4550 50  0001 C CNN
	1    8750 4550
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5D7097D4
P 8750 4150
F 0 "R?" H 8820 4196 50  0000 L CNN
F 1 "47K" H 8820 4105 50  0000 L CNN
F 2 "" V 8680 4150 50  0001 C CNN
F 3 "~" H 8750 4150 50  0001 C CNN
	1    8750 4150
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5D70980A
P 8350 3350
F 0 "R?" H 8420 3396 50  0000 L CNN
F 1 "220R" H 8420 3305 50  0000 L CNN
F 2 "" V 8280 3350 50  0001 C CNN
F 3 "~" H 8350 3350 50  0001 C CNN
	1    8350 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	8650 3900 8750 3900
Wire Wire Line
	8750 3200 8750 2700
Wire Wire Line
	8750 3500 8750 3900
Connection ~ 8750 3900
Wire Wire Line
	8750 3900 9300 3900
Wire Wire Line
	8750 4000 8750 3900
$Comp
L power:GNDREF #PWR?
U 1 1 5D70B4A7
P 8750 4800
F 0 "#PWR?" H 8750 4550 50  0001 C CNN
F 1 "GNDREF" H 8755 4627 50  0001 C CNN
F 2 "" H 8750 4800 50  0001 C CNN
F 3 "" H 8750 4800 50  0001 C CNN
	1    8750 4800
	1    0    0    -1  
$EndComp
Wire Wire Line
	8750 4700 8750 4800
$Comp
L power:GNDREF #PWR?
U 1 1 5D70BC59
P 8350 4800
F 0 "#PWR?" H 8350 4550 50  0001 C CNN
F 1 "GNDREF" H 8355 4627 50  0001 C CNN
F 2 "" H 8350 4800 50  0001 C CNN
F 3 "" H 8350 4800 50  0001 C CNN
	1    8350 4800
	1    0    0    -1  
$EndComp
Wire Wire Line
	8350 4800 8350 4100
$Comp
L Device:R R?
U 1 1 5D70D6A3
P 7500 3600
F 0 "R?" V 7293 3600 50  0000 C CNN
F 1 "100R" V 7384 3600 50  0000 C CNN
F 2 "" V 7430 3600 50  0001 C CNN
F 3 "~" H 7500 3600 50  0001 C CNN
	1    7500 3600
	0    1    1    0   
$EndComp
$Comp
L Device:C C?
U 1 1 5D70E05B
P 6750 3800
F 0 "C?" H 6865 3846 50  0000 L CNN
F 1 "47uF" H 6865 3755 50  0000 L CNN
F 2 "RA1_2" H 6788 3650 50  0001 C CNN
F 3 "~" H 6750 3800 50  0001 C CNN
	1    6750 3800
	1    0    0    -1  
$EndComp
Wire Wire Line
	6750 3950 6750 4050
Wire Wire Line
	6750 3600 6750 3650
$Comp
L Device:R R?
U 1 1 5D70FD34
P 7200 3800
F 0 "R?" H 7270 3846 50  0000 L CNN
F 1 "22K" H 7270 3755 50  0000 L CNN
F 2 "" V 7130 3800 50  0001 C CNN
F 3 "~" H 7200 3800 50  0001 C CNN
	1    7200 3800
	1    0    0    -1  
$EndComp
Wire Wire Line
	7350 3600 7200 3600
Wire Wire Line
	7200 3600 7200 3650
Wire Wire Line
	6750 3600 7200 3600
Connection ~ 7200 3600
$Comp
L power:GNDREF #PWR?
U 1 1 5D711E33
P 7200 4050
F 0 "#PWR?" H 7200 3800 50  0001 C CNN
F 1 "GNDREF" H 7205 3877 50  0001 C CNN
F 2 "" H 7200 4050 50  0001 C CNN
F 3 "" H 7200 4050 50  0001 C CNN
	1    7200 4050
	1    0    0    -1  
$EndComp
Wire Wire Line
	7200 4050 7200 3950
Wire Wire Line
	4350 3600 6750 3600
Connection ~ 6750 3600
$Comp
L Diode:1N4007 D?
U 1 1 5D70CD57
P 7900 3600
F 0 "D?" H 7900 3816 50  0000 C CNN
F 1 "1N4007" H 7900 3725 50  0000 C CNN
F 2 "Diode_THT:D_DO-41_SOD81_P10.16mm_Horizontal" H 7900 3425 50  0001 C CNN
F 3 "http://www.vishay.com/docs/88503/1n4001.pdf" H 7900 3600 50  0001 C CNN
	1    7900 3600
	1    0    0    -1  
$EndComp
Wire Wire Line
	8350 3500 8350 3600
Wire Wire Line
	7650 3600 7750 3600
Wire Wire Line
	8050 3600 8350 3600
Connection ~ 8350 3600
Wire Wire Line
	8350 3600 8350 3700
$Comp
L Device:D_Temperature_Dependent_ALT D?
U 1 1 5D71B52B
P 7050 3050
F 0 "D?" V 7004 3129 50  0000 L CNN
F 1 "LM335" V 7095 3129 50  0000 L CNN
F 2 "" H 7050 3050 50  0001 C CNN
F 3 "~" H 7050 3050 50  0001 C CNN
	1    7050 3050
	0    1    1    0   
$EndComp
$Comp
L power:GNDREF #PWR?
U 1 1 5D71C201
P 7050 3250
F 0 "#PWR?" H 7050 3000 50  0001 C CNN
F 1 "GNDREF" H 7055 3077 50  0001 C CNN
F 2 "" H 7050 3250 50  0001 C CNN
F 3 "" H 7050 3250 50  0001 C CNN
	1    7050 3250
	1    0    0    -1  
$EndComp
Wire Wire Line
	7050 3200 7050 3250
Wire Wire Line
	5700 3500 5700 2850
Wire Wire Line
	5700 2850 6000 2850
Wire Wire Line
	6000 2850 6500 2850
Connection ~ 6000 2850
Wire Wire Line
	6500 2850 7050 2850
Wire Wire Line
	7050 2850 7050 2900
Connection ~ 6500 2850
$Comp
L Device:R R?
U 1 1 5D71F54B
P 7050 2600
F 0 "R?" H 7120 2646 50  0000 L CNN
F 1 "220R" H 7120 2555 50  0000 L CNN
F 2 "" V 6980 2600 50  0001 C CNN
F 3 "~" H 7050 2600 50  0001 C CNN
	1    7050 2600
	1    0    0    -1  
$EndComp
Wire Wire Line
	7050 2750 7050 2850
Connection ~ 7050 2850
$Comp
L power:+3V3 #PWR?
U 1 1 5D7204B7
P 7050 2350
F 0 "#PWR?" H 7050 2200 50  0001 C CNN
F 1 "+3V3" H 7065 2523 50  0000 C CNN
F 2 "" H 7050 2350 50  0001 C CNN
F 3 "" H 7050 2350 50  0001 C CNN
	1    7050 2350
	1    0    0    -1  
$EndComp
Wire Wire Line
	7050 2350 7050 2450
$Comp
L power:+3V3 #PWR?
U 1 1 5D723C51
P 6100 6750
F 0 "#PWR?" H 6100 6600 50  0001 C CNN
F 1 "+3V3" H 6115 6923 50  0000 C CNN
F 2 "" H 6100 6750 50  0001 C CNN
F 3 "" H 6100 6750 50  0001 C CNN
	1    6100 6750
	1    0    0    -1  
$EndComp
Wire Wire Line
	6100 6750 6100 6950
Connection ~ 6100 6950
Wire Wire Line
	6100 6950 5900 6950
$EndSCHEMATC
